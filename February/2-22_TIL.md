ğŸš€ Kubernetes êµ¬ì„± ìš”ì†Œ ê°œë… ë° ì¢…ë¥˜ ì •ë¦¬

Kubernetes í´ëŸ¬ìŠ¤í„°ë¥¼ êµ¬ì¶•í•˜ê³  ìš´ì˜í•˜ê¸° ìœ„í•´ ë§¤ë‹ˆí˜ìŠ¤íŠ¸ íŒŒì¼, ì»¨í…Œì´ë„ˆ ëŸ°íƒ€ì„, kubeadm, kubelet, kubectl, CNI ë“± ë‹¤ì–‘í•œ ê°œë…ì´ í•„ìš”í•©ë‹ˆë‹¤. ì•„ë˜ì—ì„œ ê° ê°œë…ê³¼ ì¢…ë¥˜ë¥¼ ì •ë¦¬í•´ ì„¤ëª…í•©ë‹ˆë‹¤.

âœ… 1ï¸âƒ£ ë§¤ë‹ˆí˜ìŠ¤íŠ¸ íŒŒì¼ (Manifest File)

ğŸ“Œ ê°œë…:
	â€¢	Kubernetesì—ì„œ ë¦¬ì†ŒìŠ¤ë¥¼ ì„ ì–¸ì ìœ¼ë¡œ ì •ì˜í•˜ëŠ” YAML ë˜ëŠ” JSON íŒŒì¼
	â€¢	Deployment, Service, ConfigMap, Secret, Ingress ë“± ëª¨ë“  Kubernetes ë¦¬ì†ŒìŠ¤ëŠ” ë§¤ë‹ˆí˜ìŠ¤íŠ¸ íŒŒì¼ë¡œ ì •ì˜ë¨

ğŸ“Œ ë§¤ë‹ˆí˜ìŠ¤íŠ¸ íŒŒì¼ ì˜ˆì‹œ (nginx-deployment.yaml)

apiVersion: apps/v1
kind: Deployment
metadata:
  name: nginx-deployment
  labels:
    app: nginx
spec:
  replicas: 2
  selector:
    matchLabels:
      app: nginx
  template:
    metadata:
      labels:
        app: nginx
    spec:
      containers:
      - name: nginx
        image: nginx:latest
        ports:
        - containerPort: 80

ğŸ“Œ ì¢…ë¥˜:

ì¢…ë¥˜	ì„¤ëª…
Deployment	ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ë°°í¬í•˜ê³  ê´€ë¦¬
Service	Pod ê°„ ë„¤íŠ¸ì›Œí¬ ì—°ê²° ë° ì™¸ë¶€ ì ‘ê·¼ ì„¤ì •
ConfigMap	í™˜ê²½ ë³€ìˆ˜ ë° ì„¤ì •ê°’ ì €ì¥
Secret	ë³´ì•ˆ ì •ë³´ ì €ì¥ (ë¹„ë°€ë²ˆí˜¸, ì¸ì¦í‚¤ ë“±)
Ingress	ì™¸ë¶€ íŠ¸ë˜í”½ì„ ë‚´ë¶€ Serviceë¡œ ë¼ìš°íŒ…

ğŸ“Œ ë§¤ë‹ˆí˜ìŠ¤íŠ¸ ì ìš© ëª…ë ¹ì–´

kubectl apply -f <íŒŒì¼ëª…>.yaml

âœ… 2ï¸âƒ£ ì»¨í…Œì´ë„ˆ ëŸ°íƒ€ì„ (Container Runtime)

ğŸ“Œ ê°œë…:
	â€¢	Kubernetesì—ì„œ ì»¨í…Œì´ë„ˆë¥¼ ì‹¤í–‰í•˜ëŠ” ì—”ì§„
	â€¢	kubeletì´ ì»¨í…Œì´ë„ˆ ëŸ°íƒ€ì„ì„ í†µí•´ ì»¨í…Œì´ë„ˆë¥¼ ìƒì„±í•˜ê³  ê´€ë¦¬
	â€¢	KubernetesëŠ” ì—¬ëŸ¬ ì»¨í…Œì´ë„ˆ ëŸ°íƒ€ì„ì„ ì§€ì›í•˜ì§€ë§Œ CRI (Container Runtime Interface) ë¥¼ í†µí•´ í‘œì¤€í™”ë¨

ğŸ“Œ ëŒ€í‘œì ì¸ ì»¨í…Œì´ë„ˆ ëŸ°íƒ€ì„ ì¢…ë¥˜:

ì»¨í…Œì´ë„ˆ ëŸ°íƒ€ì„	ì„¤ëª…
containerd	Dockerê°€ ë‚´ë¶€ì ìœ¼ë¡œ ì‚¬ìš©í•˜ë˜ ê²½ëŸ‰ ì»¨í…Œì´ë„ˆ ëŸ°íƒ€ì„, í˜„ì¬ ê°€ì¥ ë„ë¦¬ ì‚¬ìš©ë¨ (Kubernetes ê¸°ë³¸)
CRI-O	Kubernetesìš©ìœ¼ë¡œ ìµœì í™”ëœ ì»¨í…Œì´ë„ˆ ëŸ°íƒ€ì„
Docker	ê°€ì¥ ë„ë¦¬ ì‚¬ìš©ë˜ëŠ” ì»¨í…Œì´ë„ˆ ëŸ°íƒ€ì„ì´ì—ˆì§€ë§Œ, Kubernetesì—ì„œ ê¸°ë³¸ì ìœ¼ë¡œ ì‚¬ìš©ë˜ì§€ ì•ŠìŒ
gVisor	ë³´ì•ˆì´ ê°•í™”ëœ ìƒŒë“œë°•ìŠ¤ ì»¨í…Œì´ë„ˆ ëŸ°íƒ€ì„

ğŸ“Œ ì„¤ì¹˜ ë° ìƒíƒœ í™•ì¸ (containerd ì˜ˆì‹œ)

sudo apt install -y containerd
sudo systemctl status containerd

âœ… 3ï¸âƒ£ kubeadm

ğŸ“Œ ê°œë…:
	â€¢	Kubernetes í´ëŸ¬ìŠ¤í„°ë¥¼ ì„¤ì¹˜í•˜ê³  ì´ˆê¸°í™”í•˜ëŠ” ë„êµ¬
	â€¢	kubeadm initì„ ì‹¤í–‰í•˜ë©´ Master Nodeê°€ ì„¤ì •ë˜ê³ , kubeadm joinì„ ì‹¤í–‰í•˜ë©´ Worker Nodeê°€ í´ëŸ¬ìŠ¤í„°ì— ì¶”ê°€ë¨

ğŸ“Œ ì£¼ìš” ëª…ë ¹ì–´

ëª…ë ¹ì–´	ì„¤ëª…
kubeadm init	Master Node ì´ˆê¸°í™”
kubeadm join <master-ip>:6443 --token ...	Worker Nodeë¥¼ í´ëŸ¬ìŠ¤í„°ì— ì¶”ê°€
kubeadm reset	í´ëŸ¬ìŠ¤í„° ì´ˆê¸°í™” ë° ì„¤ì • ì œê±°
kubeadm upgrade	Kubernetes ë²„ì „ ì—…ê·¸ë ˆì´ë“œ

ğŸ“Œ Master Node ì´ˆê¸°í™”

sudo kubeadm init --pod-network-cidr=192.168.0.0/16

ğŸ“Œ Worker Node ì¶”ê°€

sudo kubeadm join <master-ip>:6443 --token <token> --discovery-token-ca-cert-hash sha256:<hash>

âœ… 4ï¸âƒ£ kubelet

ğŸ“Œ ê°œë…:
	â€¢	ê° ë…¸ë“œì—ì„œ ì‹¤í–‰ë˜ë©°, Kubernetesì˜ ëª…ë ¹ì„ ë°›ê³  ì»¨í…Œì´ë„ˆë¥¼ ì‹¤í–‰í•˜ê³  ê´€ë¦¬í•˜ëŠ” ì—ì´ì „íŠ¸
	â€¢	ì»¨í…Œì´ë„ˆ ëŸ°íƒ€ì„ì„ ì‚¬ìš©í•˜ì—¬ Podì„ ì‹¤í–‰í•˜ê³  ìƒíƒœë¥¼ ëª¨ë‹ˆí„°ë§
	â€¢	Master Nodeì™€ í†µì‹ í•˜ë©°, Podì´ ì •ìƒì ìœ¼ë¡œ ë™ì‘í•˜ëŠ”ì§€ ì²´í¬

ğŸ“Œ ìƒíƒœ í™•ì¸ ë° ì¬ì‹œì‘

sudo systemctl status kubelet
sudo systemctl restart kubelet

ğŸ“Œ kubeletì´ ì‹¤í–‰ë˜ì§€ ì•Šì„ ê²½ìš° í•´ê²° ë°©ë²•

journalctl -u kubelet --no-pager --lines=50

	â€¢	Swap ë¹„í™œì„±í™” í•„ìš” (swapoff -a)
	â€¢	Cgroup ë“œë¼ì´ë²„ í™•ì¸ (SystemdCgroup = true)

âœ… 5ï¸âƒ£ kubectl

ğŸ“Œ ê°œë…:
	â€¢	Kubernetes í´ëŸ¬ìŠ¤í„°ë¥¼ ê´€ë¦¬í•˜ëŠ” CLI ë„êµ¬
	â€¢	kubectlì„ ì‚¬ìš©í•˜ì—¬ Pod ë°°í¬, ìƒíƒœ í™•ì¸, ì´ë²¤íŠ¸ ëª¨ë‹ˆí„°ë§ ë“±ì„ ìˆ˜í–‰

ğŸ“Œ ì£¼ìš” ëª…ë ¹ì–´

ëª…ë ¹ì–´	ì„¤ëª…
kubectl get nodes	í´ëŸ¬ìŠ¤í„°ì˜ ëª¨ë“  ë…¸ë“œ í™•ì¸
kubectl get pods -A	ëª¨ë“  ë„¤ì„ìŠ¤í˜ì´ìŠ¤ì˜ Pod í™•ì¸
kubectl describe pod <pod-name>	íŠ¹ì • Pod ìƒì„¸ ì •ë³´ í™•ì¸
kubectl logs <pod-name>	Podì˜ ë¡œê·¸ í™•ì¸
kubectl exec -it <pod-name> -- /bin/sh	íŠ¹ì • Pod ë‚´ë¶€ì—ì„œ ì…¸ ì‹¤í–‰

ğŸ“Œ kubectl ì„¤ì • (KUBECONFIG ì ìš©)

export KUBECONFIG=/etc/kubernetes/admin.conf
echo "export KUBECONFIG=/etc/kubernetes/admin.conf" >> ~/.bashrc
source ~/.bashrc

âœ… 6ï¸âƒ£ CNI (Container Network Interface)

ğŸ“Œ ê°œë…:
	â€¢	Kubernetesì—ì„œ Pod ê°„ ë„¤íŠ¸ì›Œí¬ë¥¼ ê´€ë¦¬í•˜ëŠ” í”ŒëŸ¬ê·¸ì¸
	â€¢	Pod ê°„ í†µì‹ ì„ ê°€ëŠ¥í•˜ê²Œ í•˜ê³ , IP ì£¼ì†Œë¥¼ í• ë‹¹í•˜ë©°, ë„¤íŠ¸ì›Œí¬ ì •ì±…ì„ ì ìš©í•¨

ğŸ“Œ ëŒ€í‘œì ì¸ CNI ì¢…ë¥˜

CNI í”ŒëŸ¬ê·¸ì¸	ì„¤ëª…
Calico	ê°€ì¥ ë„ë¦¬ ì‚¬ìš©ë˜ëŠ” CNI, ë³´ì•ˆ ì •ì±… ë° ë„¤íŠ¸ì›Œí¬ ì •ì±… ì œê³µ
Flannel	ê°„ë‹¨í•œ ì˜¤ë²„ë ˆì´ ë„¤íŠ¸ì›Œí¬ë¥¼ ì œê³µ, ê¸°ë³¸ì ì¸ ê¸°ëŠ¥ ì œê³µ
Weave Net	ìë™ ë„¤íŠ¸ì›Œí¬ ë³µêµ¬ ê¸°ëŠ¥ì´ í¬í•¨ëœ CNI
Cilium	eBPF ê¸°ë°˜ìœ¼ë¡œ ì„±ëŠ¥ì´ ë›°ì–´ë‚˜ê³  ë³´ì•ˆ ê¸°ëŠ¥ì´ ê°•í™”ë¨

ğŸ“Œ ì„¤ì¹˜ ë°©ë²• (Calico ì˜ˆì‹œ)

kubectl apply -f https://raw.githubusercontent.com/projectcalico/calico/v3.26.1/manifests/calico.yaml

ğŸ“Œ ì„¤ì¹˜ í™•ì¸

kubectl get pods -n kube-system | grep calico

ğŸ¯ ìµœì¢… ìš”ì•½

ê°œë…	ì„¤ëª…
ë§¤ë‹ˆí˜ìŠ¤íŠ¸ íŒŒì¼	Kubernetes ë¦¬ì†ŒìŠ¤ë¥¼ ì„ ì–¸í•˜ëŠ” YAML íŒŒì¼ (Deployment, Service ë“±)
ì»¨í…Œì´ë„ˆ ëŸ°íƒ€ì„	Kubernetesì—ì„œ ì»¨í…Œì´ë„ˆë¥¼ ì‹¤í–‰í•˜ëŠ” ì—”ì§„ (containerd, CRI-O ë“±)
kubeadm	Kubernetes í´ëŸ¬ìŠ¤í„°ë¥¼ ì„¤ì¹˜í•˜ê³  ì´ˆê¸°í™”í•˜ëŠ” ë„êµ¬
kubelet	ê° ë…¸ë“œì—ì„œ ì‹¤í–‰ë˜ë©° Podì˜ ìƒíƒœë¥¼ ê´€ë¦¬í•˜ëŠ” ì—ì´ì „íŠ¸
kubectl	Kubernetes í´ëŸ¬ìŠ¤í„°ë¥¼ ê´€ë¦¬í•˜ëŠ” CLI ë„êµ¬
CNI	Kubernetes ë„¤íŠ¸ì›Œí¬ë¥¼ ê´€ë¦¬í•˜ëŠ” í”ŒëŸ¬ê·¸ì¸ (Calico, Flannel ë“±)

ğŸ“Œ ì´ì œ kubectl get nodes -o wide, kubectl get pods -A ì‹¤í–‰í•˜ì—¬ í™•ì¸ ê°€ëŠ¥ ğŸš€
