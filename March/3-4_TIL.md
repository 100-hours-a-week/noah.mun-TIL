## 3Tier Architecture 구성

---

![스크린샷 2025-03-04 오후 10.59.20.png](/images/3-4_1.png)

위 그림과 같이 3티어 구성 실습을 해봤다.

<aside>
🛠

**사용 툴**

AWS EC2, VPC, OPENVPN, RDS

</aside>

일단 클라우드 수업을 따라가면서 전체적인 그림을 그리려고 많이 노력하고 있다.

클라우드 아키텍처를 잘 설계하기 위해서는 큰 그림을 그리는 것이 가장 중요하다고 생각하기 때문이다.

### 전체적인 Flow

---

1. AWS Cloud를 사용해 전체적으로 구성을 한다.
2. 그 안에 VPC 환경을 구성하여 내부와 외부가 무분별하게 통신하는 것을 막고, 서버 내부의 보안을 신경쓴다.
3. VPC 내부와 외부는 Internet Gateway로만 통신할 수 있다.
4. VPC 내부는 3Tier로 구성된다. (public (vpn), nat, private)
5. public과 nat는 nat로만 통신할 수 있다.
6. nat에 들어오는 부하는 loadbalancer로 해결함

이게 전체적인 그림이고 구상하는 방법을 그냥 과정 보지 않고 내 머릿속으로만 정리하여 적어보겠다.

교육 시간에 실습하고 VPC 설정부터해서 싹 다 지웠음 (다니엘이 지웠다 구성했다를 많이 해봐야 실력이 는다고 했음)

### 구상 순서

---

1. VPC 구성
2. 서브넷 구성 (A, C존 사용할거면 총 6개의 서브넷 구성해야 함)
3. 라우팅 테이블 구성 (라우팅 테이블 구성 안하면 통신 안된다)
    1. 라우팅 테이블은 각 tier별 2개씩 생성해도 되는데, public은 통틀어서 한 개로 구성하는 방식을 많이 쓰던데
4. Internet gateway 구성 (외부랑 통신하는 구멍)
5. Nat gateway 구성 (NAT GW가 EIP를 가지는 이유는 NAT subnet은 인스턴스 자체가 외부와 통신하는 것이 아니라 nat gw를 통해서 서버가 인터넷에 정보를 전달하는 것만 가능하게 만들기 위해)
6. public subnet 부분 openvpn 설정

## Router 53이란?

---

<aside>
📖

AWS에서 제공하는 클라우드 기반의 DNS 서비스
도메인 등록, DNS 레코드 관리, 트래픽 라우팅, 헬스 체크 기능 제공

</aside>

Router 53으로 ACM을 설정해주고 난 후에는 SSL 설정도 같이 하여 https: ~ 도메인 관련 보안 설정을 해주도록 하자

## AWS WAF란?

---

<aside>
📖

웹 애플리케이션을 다양한 웹 공격으로부터 보호하는 보안 서비스

SQL 인젝션, XSS, 봇 트래픽, DDoS 공격 같은 웹 기반 공격을 탐지하고 차단

</aside>

동작 방식

- 규칙 기반 필터링을 사용하여 특정한 조건을 만족하는 요청을 차단하거나 허용함
    1. 요청이 들어오면 WAF가 분석
    2. WAF 규칙 (ACL)에 따라 허용/차단 결정 
    3. 허용된 요청만 애플리케이션으로 전달
